<script lang="ts">
    let { duration = 0.4 } = $props<{ duration?: number }>();

	let svgElement: SVGElement | undefined = $state();
	let animationKey = $state(0);
	
	// path data from signature svg
	const pathData = [
		{ d: "M 98.000,120.617 C 103.114,113.002 103.750,113.617 109.500,106.617", strokeWidth: "5.221" },
		{ d: "M 109.500,106.617 C 119.331,96.493 119.364,96.752 130.500,88.117", strokeWidth: "2.586" },
		{ d: "M 130.500,88.117 C 145.540,77.089 145.331,76.993 161.500,67.617", strokeWidth: "1.888" },
		{ d: "M 161.500,67.617 C 176.246,58.389 176.290,58.839 192.000,51.617", strokeWidth: "1.868" },
		{ d: "M 192.000,51.617 C 203.373,47.598 202.996,46.889 215.000,44.617", strokeWidth: "2.169" },
		{ d: "M 215.000,44.617 C 222.951,42.700 222.873,42.598 231.000,41.617", strokeWidth: "2.618" },
		{ d: "M 231.000,41.617 C 235.998,41.278 235.951,40.950 241.000,41.117", strokeWidth: "3.156" },
		{ d: "M 241.000,41.117 C 246.892,39.706 243.748,41.028 246.500,41.117", strokeWidth: "3.849" },
		{ d: "M 246.500,41.117 C 242.956,46.097 245.642,44.206 238.500,50.117", strokeWidth: "4.304" },
		{ d: "M 238.500,50.117 C 229.760,57.129 230.206,57.597 221.000,64.117", strokeWidth: "2.714" },
		{ d: "M 221.000,64.117 C 208.595,73.677 208.760,73.879 196.500,83.617", strokeWidth: "2.154" },
		{ d: "M 196.500,83.617 C 183.616,94.757 183.345,94.427 170.500,105.617", strokeWidth: "1.892" },
		{ d: "M 170.500,105.617 C 160.415,114.082 160.366,114.007 150.000,122.117", strokeWidth: "2.151" },
		{ d: "M 150.000,122.117 C 142.713,127.317 142.915,127.582 135.500,132.617", strokeWidth: "2.480" },
		{ d: "M 135.500,132.617 C 130.614,136.537 130.463,136.317 125.500,140.117", strokeWidth: "2.919" },
		{ d: "M 125.500,140.117 C 119.644,142.546 123.114,141.787 120.500,143.117", strokeWidth: "3.738" },
		{ d: "M 120.500,143.117 C 125.442,144.217 121.894,144.046 130.000,143.117", strokeWidth: "4.497" },
		{ d: "M 130.000,143.117 C 139.864,139.910 139.942,140.717 149.500,136.117", strokeWidth: "2.917" },
		{ d: "M 149.500,136.117 C 163.333,130.559 163.364,130.660 177.000,124.617", strokeWidth: "2.245" },
		{ d: "M 177.000,124.617 C 192.074,118.027 192.083,118.059 207.000,111.117", strokeWidth: "2.004" },
		{ d: "M 207.000,111.117 C 219.009,105.385 219.074,105.527 231.000,99.617", strokeWidth: "2.021" },
		{ d: "M 231.000,99.617 C 238.711,95.782 238.759,95.885 246.500,92.117", strokeWidth: "2.506" },
		{ d: "M 246.500,92.117 C 251.434,89.703 251.461,89.782 256.500,87.617", strokeWidth: "3.036" },
		{ d: "M 256.500,87.617 C 264.600,83.943 259.934,86.203 263.500,85.117", strokeWidth: "3.601" },
		{ d: "M 263.500,85.117 C 256.325,90.474 260.850,87.943 249.000,95.617", strokeWidth: "4.263" },
		{ d: "M 249.000,95.617 C 244.429,98.516 244.575,98.724 240.000,101.617", strokeWidth: "3.650" },
		{ d: "M 240.000,101.617 C 236.762,103.605 236.929,103.766 234.000,106.117", strokeWidth: "3.823" },
		{ d: "M 234.000,106.117 C 228.381,110.006 231.262,108.605 229.000,111.617", strokeWidth: "4.330" },
		{ d: "M 229.000,111.617 C 232.836,113.153 229.631,113.256 236.500,112.617", strokeWidth: "4.499" },
		{ d: "M 236.500,112.617 C 243.237,111.195 243.086,111.653 249.500,108.617", strokeWidth: "3.368" },
		{ d: "M 249.500,108.617 C 255.919,105.652 255.987,105.945 262.000,102.117", strokeWidth: "3.158" },
		{ d: "M 262.000,102.117 C 266.500,99.117 266.669,99.402 271.000,96.117", strokeWidth: "3.349" },
		{ d: "M 271.000,96.117 C 276.896,91.181 274.000,94.117 277.000,92.117", strokeWidth: "3.748" },
		{ d: "M 277.000,92.117 C 274.530,96.577 277.146,93.431 271.500,100.617", strokeWidth: "4.473" },
		{ d: "M 271.500,100.617 C 268.133,104.272 268.530,104.577 265.000,108.117", strokeWidth: "3.721" },
		{ d: "M 265.000,108.117 C 259.725,113.895 262.633,111.022 260.500,114.117", strokeWidth: "3.892" },
		{ d: "M 260.500,114.117 C 264.738,111.938 261.475,114.395 268.500,109.117", strokeWidth: "4.560" },
		{ d: "M 268.500,109.117 C 272.407,105.504 272.738,105.938 276.500,102.117", strokeWidth: "3.664" },
		{ d: "M 276.500,102.117 C 279.686,99.527 279.657,99.504 283.000,97.117", strokeWidth: "3.754" },
		{ d: "M 283.000,97.117 C 287.063,93.352 285.186,95.527 287.500,94.117", strokeWidth: "4.461" },
		{ d: "M 287.500,94.117 C 286.387,97.427 288.063,95.102 285.000,100.617", strokeWidth: "4.605" },
		{ d: "M 285.000,100.617 C 283.750,103.117 283.887,103.177 282.500,105.617", strokeWidth: "4.290" },
		{ d: "M 282.500,105.617 C 278.563,110.760 281.250,108.117 280.000,110.617", strokeWidth: "4.655" },
		{ d: "M 280.000,110.617 C 286.614,108.231 283.563,110.260 292.500,104.617", strokeWidth: "4.146" },
		{ d: "M 292.500,104.617 C 300.569,98.960 300.864,99.481 308.500,93.117", strokeWidth: "2.857" },
		{ d: "M 308.500,93.117 C 314.738,88.351 314.819,88.460 321.000,83.617", strokeWidth: "2.904" },
		{ d: "M 321.000,83.617 C 324.894,80.459 324.988,80.601 329.000,77.617", strokeWidth: "3.323" },
		{ d: "M 329.000,77.617 C 333.214,73.719 331.394,75.959 334.000,74.617", strokeWidth: "3.885" },
		{ d: "M 334.000,74.617 C 333.738,78.283 334.964,75.719 332.500,81.617", strokeWidth: "4.357" },
		{ d: "M 332.500,81.617 C 330.100,86.917 330.488,87.033 327.500,92.117", strokeWidth: "3.592" },
		{ d: "M 327.500,92.117 C 325.150,96.317 325.350,96.417 323.000,100.617", strokeWidth: "3.592" },
		{ d: "M 323.000,100.617 C 320.243,103.544 321.650,103.317 320.500,106.117", strokeWidth: "3.965" },
		{ d: "M 320.500,106.117 C 321.594,110.969 320.743,108.544 324.000,110.617", strokeWidth: "4.513" },
		{ d: "M 324.000,110.617 C 332.987,107.750 331.844,109.469 341.000,103.117", strokeWidth: "3.059" },
		{ d: "M 341.000,103.117 C 353.583,95.320 353.737,95.750 365.500,86.617", strokeWidth: "2.211" },
		{ d: "M 365.500,86.617 C 375.741,78.897 375.833,79.070 385.500,70.617", strokeWidth: "2.234" },
		{ d: "M 385.500,70.617 C 392.096,64.716 392.241,64.897 398.500,58.617", strokeWidth: "2.576" },
		{ d: "M 398.500,58.617 C 402.580,54.693 402.596,54.716 406.500,50.617", strokeWidth: "3.089" },
		{ d: "M 406.500,50.617 C 412.792,45.039 408.830,48.193 411.000,45.617", strokeWidth: "3.651" },
		{ d: "M 411.000,45.617 C 400.027,49.184 405.042,47.539 391.000,55.617", strokeWidth: "3.813" },
		{ d: "M 391.000,55.617 C 378.823,65.675 378.277,64.684 367.500,76.617", strokeWidth: "2.305" },
		{ d: "M 367.500,76.617 C 356.767,87.404 356.573,87.175 346.500,98.617", strokeWidth: "2.036" },
		{ d: "M 346.500,98.617 C 337.734,108.149 337.767,108.154 329.500,118.117", strokeWidth: "2.168" },
		{ d: "M 329.500,118.117 C 323.262,125.304 323.484,125.399 318.000,133.117", strokeWidth: "2.493" },
		{ d: "M 318.000,133.117 C 315.143,137.719 315.012,137.554 313.000,142.617", strokeWidth: "3.046" },
		{ d: "M 313.000,142.617 C 311.286,145.831 311.643,145.719 311.000,149.117", strokeWidth: "3.667" },
		{ d: "M 311.000,149.117 C 310.395,153.085 310.786,151.581 312.000,154.117", strokeWidth: "4.435" },
		{ d: "M 312.000,154.117 C 315.132,154.436 313.895,155.335 318.000,153.617", strokeWidth: "4.234" },
		{ d: "M 318.000,153.617 C 324.017,151.910 323.882,151.936 329.500,149.117", strokeWidth: "3.500" },
		{ d: "M 329.500,149.117 C 336.968,144.562 337.267,145.160 344.500,140.117", strokeWidth: "2.957" },
		{ d: "M 344.500,140.117 C 352.339,135.763 352.218,135.562 360.000,131.117", strokeWidth: "2.800" },
		{ d: "M 360.000,131.117 C 367.480,126.335 367.589,126.513 375.000,121.617", strokeWidth: "2.705" },
		{ d: "M 375.000,121.617 C 380.220,118.317 380.230,118.335 385.500,115.117", strokeWidth: "3.070" },
		{ d: "M 385.500,115.117 C 388.548,113.444 388.470,113.317 391.500,111.617", strokeWidth: "3.663" },
		{ d: "M 391.500,111.617 C 397.777,108.944 393.798,110.194 396.000,108.617", strokeWidth: "4.410" },
		{ d: "M 396.000,108.617 C 384.217,107.441 388.277,107.194 372.500,108.117", strokeWidth: "3.557" },
		{ d: "M 372.500,108.117 C 344.793,107.909 345.217,109.691 318.000,113.117", strokeWidth: "1.576" },
		{ d: "M 318.000,113.117 C 264.704,123.491 265.043,123.409 213.000,139.117", strokeWidth: "1.125" },
		{ d: "M 213.000,139.117 C 163.347,155.842 162.954,154.241 114.500,174.617", strokeWidth: "1.125" },
		{ d: "M 114.500,174.617 C 86.995,186.356 86.597,185.342 59.500,198.117", strokeWidth: "1.125" },
		{ d: "M 59.500,198.117 C 43.798,204.982 43.745,204.856 28.000,211.617", strokeWidth: "1.510" },
		{ d: "M 28.000,211.617 C 18.746,215.356 18.798,215.482 9.500,219.117", strokeWidth: "2.131" },
		{ d: "M 9.500,219.117 C 0.482,223.286 3.996,221.356 -1.500,223.617", strokeWidth: "2.839" },
		{ d: "M -1.500,223.617 C 0.844,221.578 -2.518,223.786 3.500,220.117", strokeWidth: "4.180" }
	];

	// Function to restart animation
	export function restart() {
		animationKey++;
	}
</script>

{#key animationKey}
<div class="flex items-center justify-center w-full">
	<svg 
		bind:this={svgElement}
		xmlns="http://www.w3.org/2000/svg" 
		viewBox="-6.5 35.46963882446289 422.5 193.14736938476562"
		class="w-full h-auto"
	>
		{#each pathData as path, index}
			<path 
				d={path.d} 
				stroke-width={path.strokeWidth} 
				stroke="black" 
				fill="none" 
				stroke-linecap="round"
				stroke-dasharray="1000"
				stroke-dashoffset="1000"
			>
				<animate 
					attributeName="stroke-dashoffset" 
					from="1000" 
					to="0" 
					dur="{duration}s" 
					begin="{index * 0.02}s"
					fill="freeze"
				/>
			</path>
		{/each}
	</svg>
</div>
{/key}
